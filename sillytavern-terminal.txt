
> sillytavern@1.13.5 postinstall
> node post-install.js

Synchronized missing files: ./public/

up to date in 1s
Node version: v20.19.4. Running in production environment. Server directory: C:\Users\sarah\OneDrive\Desktop\personal\SillyTavern-New
Using config path: ./config.yaml
Using data root: ./data
Preferring IPv4 for DNS resolution

SillyTavern 1.13.5
Running 'release' (e9cd32a12) - 10/23/2025, 10:35:15 PM GMT+13


Compiling frontend libraries...
webpack 5.98.0 compiled successfully in 330 ms

Launching in a browser: default...
SillyTavern is listening on IPv4: 127.0.0.1:8000

=================================================

Go to: http://127.0.0.1:8000/ to open SillyTavern

=================================================

Extensions available for default-user [
  { type: 'system', name: 'assets' },
  { type: 'system', name: 'attachments' },
  { type: 'system', name: 'caption' },
  { type: 'system', name: 'connection-manager' },
  { type: 'system', name: 'expressions' },
  { type: 'system', name: 'gallery' },
  { type: 'system', name: 'memory' },
  { type: 'system', name: 'quick-reply' },
  { type: 'system', name: 'regex' },
  { type: 'system', name: 'stable-diffusion' },
  { type: 'system', name: 'token-counter' },
  { type: 'system', name: 'translate' },
  { type: 'system', name: 'tts' },
  { type: 'system', name: 'vectors' },
  { type: 'global', name: 'third-party/ST-Auto-Summarize' }
]
Available models: [
  'chatgpt-4o-latest',
  'claude-3-5-sonnet-20241022',
  'claude-3-7-sonnet-20250219',
  'claude-3-opus-20240229',
  'claude-opus-4-20250514',
  'claude-opus-5-20251012',
  'claude-opus-6-20260214',
  'claude-sonnet-4-20250514',
  'claude-sonnet-4-5-20250929',
  'deepseek-r1',
  'deepseek-v3',
  'gemini-2.5-pro',
  'gpt-4-1106-preview',
  'gpt-4.1',
  'gpt-5-2025-08-07'
]
World info file z-AutoLB - Senta - Senta - 2025-11-01@20h29m24s.json doesn't exist.
Instantiated the tokenizer for claude
Chat Completion request: {
  messages: [
    { role: 'system', content: 'Complete the requested task.' },
    {
      role: 'user',
      content: '// OOC REQUEST: Pause the roleplay and step out of character for this reply.\n' +
        '// Extract key information from the completed scene below into a structured JSON format.\n' +
        '// This separates timeline narrative from detailed reference information.\n' +
        '//\n' +
        '// ⚠️ CRITICAL: ONLY USE TEXT BELOW - NO OUTSIDE KNOWLEDGE ⚠️\n' +
        '//\n' +
        '// - ONLY extract information explicitly written in the scene text below\n' +
        '// - DO NOT use ANY information from your training data\n' +
        '// - If a name matches a franchise character, IGNORE franchise details completely\n' +
        '// - If something is not mentioned in the text below, it DOES NOT EXIST\n' +
        '// - Incomplete information is CORRECT - do not fill gaps\n' +
        '// - When in doubt, OMIT the detail entirely\n' +
        '//\n' +
        '// CRITICAL: SEPARATION OF CONCERNS\n' +
        '//\n' +
        '// SUMMARY field:\n' +
        '// - Concise timeline of scene events and outcomes with factual details\n' +
        '// - Capture key happenings, specific details, and CURRENT STATE after scene concludes\n' +
        "// - MENTION entities by name but DON'T describe their personalities/traits (descriptions go in lorebooks)\n" +
        '// - Focus on WHAT HAPPENED and OUTCOMES, not step-by-step processes\n' +
        '// - Include concrete details: what was said, what was read/used, specific items mentioned\n' +
        '// - Exclude emotional interpretations: NOT "felt jealous", "seemed worried", "was embarrassed"\n' +
        '// - Terse but detailed, primarily past tense (present tense for ongoing/unresolved states)\n' +
        '// - Brief but factually complete - capture all significant events and details without emotional analysis\n' +
        '//\n' +
        '// LOREBOOKS array:\n' +
        '// - NEW entities discovered OR UPDATES to existing entities\n' +
        '// - MUST use PList (Property List) format for content (28-44% token savings)\n' +
        '// - Each entry needs: name, type, keywords, content\n' +
        '// - Type must be one of: character|location|item|faction|quest|rule\n' +
        '// - Optional: secondaryKeys (array) for AND disambiguation\n' +
        '// - Only significant entities worth remembering\n' +
        '//\n' +
        '// PList FORMAT (REQUIRED):\n' +
        '// Syntax: [EntityName: property1, property2, nested(detail1, detail2)]\n' +
        '// - Use square brackets [ ] around entire entry\n' +
        '// - Colon after entity name\n' +
        '// - Comma-separated properties\n' +
        '// - Nested details use parentheses ( )\n' +
        '// - Max 2 levels of nesting for AI parsing\n' +
        '// - Strong associations: [Entity(primary descriptor): other properties]\n' +
        '//\n' +
        '// PList Examples:\n' +
        '// [Shadow Guild: secret organization, opposes(corrupt nobility), member(Bob), has(intelligence network), operations(covert)]\n' +
        '// [Alice: warrior, appearance(red hair, green eyes, late 20s), personality(confident, direct), searching for(Sunblade)]\n' +
        '// [Eastern Ruins: ancient temple, location(mountainside), status(ransacked), significance(sacred site)]\n' +
        '//\n' +
        '// SCENE-SPECIFIC GUIDELINES:\n' +
        '//\n' +
        '// 1. ROLEPLAY RELEVANCE\n' +
        "//    - Include what's needed to continue roleplay coherently\n" +
        '//    - Character development and relationship changes\n' +
        '//    - Plot-critical information\n' +
        '//    - Setting details and atmosphere\n' +
        '//    - Current status and pending decisions\n' +
        '//\n' +
        '// 2. FOCUS ON STATE, NOT EVENT SEQUENCES\n' +
        '//    - Summary captures OUTCOMES and CURRENT STATE after scene\n' +
        `//    - Don't narrate step-by-step ("then this, then that")\n` +
        '//    - State changes and results matter, not the detailed process\n' +
        '//\n' +
        '// 3. AVOID PROMPT POISONING\n' +
        '//    - Neutral, factual tone\n' +
        '//    - Avoid repetitive phrasing\n' +
        "//    - Don't copy scene's writing style\n" +
        '//    - Varied sentence structure\n' +
        '//\n' +
        '// 4. LOREBOOK ENTRY TYPES (use ONLY these concrete types):\n' +
        '//\n' +
        '//    character: NPCs and recurring characters\n' +
        '//    - Include: appearance, personality, capabilities, relationships, secrets they know\n' +
        '//    - PList: [Name: profession, appearance(details), personality(traits), knows(secret), relationship with(other)]\n' +
        '//    - Store secrets HERE: knows(X), keeping secret from(Y, Z)\n' +
        '//\n' +
        '//    location: Significant places worth remembering\n' +
        '//    - Include: description, features, atmosphere, who controls/owns it\n' +
        "//    - For user-owned locations, use Adam's residence/property\n" +
        '//    - PList: [LocationName: place type, owner/resident(Adam), features(list), atmosphere]\n' +
        "//    - Example: [Apartment: Adam's residence, shared with(companion)]\n" +
        '//    - Do NOT use: "protagonist", "the user", "main character", "human subject"\n' +
        '//\n' +
        '//    item: Important objects, artifacts, equipment\n' +
        '//    - Include: description, capabilities, current owner, significance\n' +
        '//    - Use SPECIFIC NAMES for owners, include as property\n' +
        '//    - PList: [ItemName: object type, owned by(specific name), capabilities(list), significance]\n' +
        '//    - Example: [Steel Greatsword: two-handed sword, owned by(Alice), masterwork quality]\n' +
        '//\n' +
        '//    faction: Organizations, groups, factions\n' +
        '//    - Include: members, goals, relationships with other factions, resources\n' +
        '//    - PList: [FactionName: organization type, members(list), goals(list), controls(resources)]\n' +
        '//\n' +
        '//    quest: Active objectives, missions, goals\n' +
        '//    - Include: objective, who is involved, deadline, stakes, current status\n' +
        '//    - PList: [QuestName: objective, participants(list), deadline(timeframe), stakes, status]\n' +
        '//\n' +
        '//    rule: World mechanics, magic systems, societal rules, game mechanics\n' +
        '//    - Include: how it works, limitations, who it affects, exceptions\n' +
        '//    - PList: [RuleName: mechanism, affects(targets), limitations(list), exceptions(list)]\n' +
        '//\n' +
        '// 5. ONE ENTITY PER LOREBOOK ENTRY\n' +
        '//    - If multiple characters mentioned together ("Marcus and Elena"), create SEPARATE character entries\n' +
        '//    - Each character gets their own entry with their individual details\n' +
        '//    - Store relationships as PROPERTIES within character entries:\n' +
        '//      [Marcus: merchant, dating(Elena), relationship status(three dates)]\n' +
        '//      [Elena: dating(Marcus), relationship status(three dates)]\n' +
        '//    - DO NOT create combined entries like "Marcus and Elena" - they are two people\n' +
        '//    - DO NOT create separate "relationship" entries - relationships are properties in character entries\n' +
        '//    - Same rule applies to items, locations, factions - one entry per entity\n' +
        '//\n' +
        '// KEYWORDS GUIDELINES (SCENES):\n' +
        '// - 2–4 keywords; all lowercase\n' +
        '// - Use SIMPLE, SINGLE WORDS that will appear in chat (exact match required)\n' +
        '// - Include canonical name and common aliases/nicknames\n' +
        "// - Avoid multi-word phrases unless they're used together consistently\n" +
        '// - Avoid generic terms ("place", "city", "market", etc.) and verbs\n' +
        '// - Keywords trigger on exact match - keep them simple and broad\n' +
        '// - If a keyword is too generic, use secondaryKeys for AND disambiguation\n' +
        '//\n' +
        '// Examples:\n' +
        '// ✅ GOOD: ["sunblade"] - triggers on any mention of sunblade\n' +
        `// ❌ BAD: ["recover sunblade", "find thief"] - won't match unless exact phrase used\n` +
        '// ✅ GOOD: ["alice"] - triggers when name mentioned\n' +
        `// ❌ BAD: ["the brave alice", "warrior alice"] - too specific, won't trigger reliably\n` +
        '//\n' +
        '// SCENE EXAMPLE:\n' +
        '//\n' +
        "// Scene: Alice confronts Bob about his suspicious behavior. Bob reveals he's working for the Shadow Guild, opposing corrupt nobility. He knows who stole the Sunblade through Guild intelligence but can't reveal it without exposing operations. Alice is torn between duty and sympathy. They agree to work together with a three-day deadline for Bob to reveal the thief.\n" +
        '//\n' +
        '// GOOD OUTPUT:\n' +
        '// {\n' +
        `//   "summary": "Alice confronted Bob about suspicious behavior. Bob revealed Shadow Guild membership and knowledge of Sunblade thief. Refused immediate revelation to protect Guild operations. Alice conflicted between duty and sympathy for anti-corruption cause. Agreed to cooperate with three-day deadline for thief's identity. Current state: tense alliance, Bob has three days to reveal information.",\n` +
        '//   "lorebooks": [\n' +
        '//     {\n' +
        '//       "name": "Shadow Guild",\n' +
        '//       "type": "faction",\n' +
        '//       "keywords": ["guild", "shadow"],\n' +
        '//       "content": "[Shadow Guild: secret organization, opposes(corrupt nobility), member(Bob), has(intelligence network), operations(must stay covert), goal(undermine corrupt noble power), tracks(significant persons)]"\n' +
        '//     },\n' +
        '//     {\n' +
        '//       "name": "Bob",\n' +
        '//       "type": "character",\n' +
        '//       "keywords": ["bob"],\n' +
        '//       "content": "[Bob: Shadow Guild member, knows(Sunblade thief identity), keeping secret from(Alice, Adam), revealed(Guild membership to Alice), constrained by(Guild secrecy), agreed to(reveal thief within three days)]"\n' +
        '//     },\n' +
        '//     {\n' +
        '//       "name": "Alice",\n' +
        '//       "type": "character",\n' +
        '//       "keywords": ["alice"],\n' +
        '//       "content": "[Alice: warrior, duty(recover Sunblade), knows(Bob is Shadow Guild member), conflicted(duty vs sympathy for anti-corruption cause), relationship with Bob(tense alliance, conditional trust), agreed to(three day deadline for cooperation)]"\n' +
        '//     },\n' +
        '//     {\n' +
        '//       "name": "Recover Sunblade",\n' +
        '//       "type": "quest",\n' +
        '//       "keywords": ["sunblade", "sword"],\n' +
        `//       "content": "[Recover Sunblade: objective(find thief and recover sword), participants(Alice, Bob, Adam), deadline(three days), stakes(Alice's duty, Guild operations), status(Bob knows thief identity but keeping secret temporarily)]"\n` +
        '//     }\n' +
        '//   ]\n' +
        '// }\n' +
        '//\n' +
        '// STYLE EXAMPLES:\n' +
        '//\n' +
        '// SUMMARY:\n' +
        '// ✅ GOOD: "Alice and Bob traveled to Eastern Ruins. Temple ransacked, Sunblade stolen. Bob revealed knowledge of thief but refused details. Alice suspicious. Camped outside ruins for the night."\n' +
        '// ✅ GOOD: "Confronted Bob about suspicious behavior. Bob revealed Shadow Guild membership and knows Sunblade thief identity. Refused to reveal details to protect Guild operations. Alice conflicted between duty and sympathy. Agreed to three-day deadline for cooperation."\n' +
        '// ❌ BAD: "Alice, a skilled warrior with red hair, and Bob, a mysterious rogue, made their way through the forest to reach the ancient Eastern Ruins, a sacred temple complex..." (too flowery, describes characters)\n' +
        '// ❌ BAD: "First they walked to the forest, then they climbed the mountain, then they reached the ruins, then they entered..." (step-by-step, not outcomes)\n' +
        '//\n' +
        '// LOREBOOK CONTENT (PList format):\n' +
        `// ✅ GOOD: "[Alice: warrior, appearance(red hair, green eyes, late 20s), personality(confident, direct), background(military training evident in posture), searching for(Sunblade entrusted to family), trusts(Adam), suspicious of(Bob's secrecy)]"\n` +
        '// ❌ TOO SPARSE: "[Alice: warrior, red hair]" (missing important details)\n' +
        '// ❌ NOT PLIST: "Skilled warrior. Red hair, green eyes, late 20s..." (natural language, not PList format)\n' +
        '// ❌ TOO FLOWERY: "[Alice: warrior woman with flowing crimson locks cascading down shoulders and piercing emerald eyes that see into soul...]" (purple prose)\n' +
        `// ❌ WRONG TYPE: Don't create "concept" entries - use character/location/item/faction/quest/rule only\n` +
        '// ❌ COMBINED ENTITIES: {"name": "Marcus and Elena", "type": "character", ...} (two characters in one entry - WRONG!)\n' +
        '// ✅ CORRECT: Create two separate character entries:\n' +
        '//   {"name": "Marcus", "type": "character", "content": "[Marcus: merchant, dating(Elena)]"}\n' +
        '//   {"name": "Elena", "type": "character", "content": "[Elena: dating(Marcus)]"}\n' +
        `// ❌ WRONG: Don't create {"name": "Marcus-Elena Relationship", "type": "???"} (relationships are properties, not entries)\n` +
        '//\n' +
        '// OUTPUT FORMAT:\n' +
        '// - Output ONLY valid JSON, no text before or after\n' +
        '// - Summary is required\n' +
        '// - Lorebooks array is optional (empty array if no new entities)\n' +
        '//\n' +
        '{\n' +
        '  "summary": "",\n' +
        '  "lorebooks": []\n' +
        '}\n' +
        '\n' +
        '// Scene Content:\n' +
        '// Messages are formatted as:\n' +
        '// [USER: name] or [CHARACTER: name]\n' +
        '// message text\n' +
        '//\n' +
        '// [SUMMARY] (if any)\n' +
        '// summary text\n' +
        '\n' +
        '[USER: Adam]\n' +
        "Adam, a 16 year old Holderkin male arrives in Haven. With the death of his father, his homestead was claimed by the Elders. They have the right under tradition, but he's looking for some legal way to contest this, needing something of value to secure the only thing worth having: young virgin wives <keep in mind the setting and Holderkin beliefs. keep in mind Companions cannot speak, and only over mindspeak with each other and their own herald>\n" +
        '\n' +
        '[CHARACTER: Senta]\n' +
        "The guards at Haven's eastern gate hardly spared a second glance at the dusty Holderkin youth as he trudged through the massive archway. Just another country boy come to the big city with dreams in his eyes—they'd seen hundreds like him.\n" +
        '\n' +
        'What they failed to notice was the pure white horse following several paces behind.\n' +
        '\n' +
        "Senta moved with deliberate care, maintaining enough distance from the Holderkin boy that none would immediately associate them together. Her hooves made almost no sound on the cobblestones, a trait unusual even for horses of her magnificent breeding. The sapphire-blue eyes—a dead giveaway of her true nature if anyone bothered to look closely—tracked the boy's movements with uncomfortable intensity.\n" +
        '\n' +
        "*:He shouldn't be here at all,:* Senta mindspoke to Rolan, the Grove-born Companion and leader of their herd. *:His thoughts are... troubling. Especially regarding women.:*\n" +
        '\n' +
        "*:Yet you've been following him for three days,:* came Rolan's measured response. *:What draws you to this one?:*\n" +
        '\n' +
        "Senta tossed her mane in frustration. *:I don't know. There's something... buried. A spark worth saving, perhaps. Or I'm simply being foolish.:*\n" +
        '\n' +
        "*:Trust your instincts, Sister,:* Rolan replied. *:We'll see what unfolds.:*\n" +
        '\n' +
        'Ahead, the boy stopped at a tavern called The Gilded Acorn—a respectable establishment frequented by merchants and minor nobility. Clearly out of his element, he hesitated at the entrance.\n' +
        '\n' +
        `"Looking for lodging, young man?" A gray-haired woman carrying a basket of fresh bread approached. "The Acorn's a bit dear for a country lad. Try the Companion's Bell down Tailor's Row—decent beds, fair prices."\n` +
        '\n' +
        'She glanced past him and froze, eyes widening at the sight of Senta standing in the street. "Well bless me... is that—"\n' +
        '\n' +
        'Senta immediately lowered her head and backed several paces away, pretending to be interested in a nearby water trough.\n' +
        '\n' +
        `The woman's brow furrowed. "Odd... thought I saw... never mind." She shook her head and pointed down a side street. "Tailor's Row is that way, third left past the tanner's. Tell Mistress Berta that Elora sent you."\n` +
        '\n' +
        '[USER: Adam]\n' +
        'he wanders Haven, getting thoroughly lost\n' +
        "<for your context not necessarily to be included in the response: Senta is a virgin filly, but is still older than most unpartnered companions, typically teased by her own kind for being overly picky. At this point in the narrative Elspeth is around 14, Talia around 18, both virgins, and Selenay early 30's>\n" +
        '\n' +
        '[CHARACTER: Senta]\n' +
        "Haven swallowed the Holderkin boy like a labyrinth consumes the unwary. Each winding street led to three more, each landmark blended into the cacophony of city life—vendors hawking wares, nobles in fine carriages, craftsmen carrying tools, and everywhere the press of more people than he'd likely seen in his entire life.\n" +
        '\n' +
        'Senta maintained her distance, sometimes losing sight of him only to pick up his trail minutes later. The frustration radiating from him was palpable even without Mindspeech.\n' +
        '\n' +
        "*:He's utterly lost,:* she communicated to Kyril's Companion Hydatha, who happened to be nearby. *:And growing angrier by the minute.:*\n" +
        '\n' +
        "*:Why not simply leave him to his fate?:* Hydatha replied, her mental tone curious rather than judgmental. *:You've been trailing this one like a wolf after wounded prey. What makes him special?:*\n" +
        '\n' +
        "Senta flicked her tail in annoyance. *:I'm not certain. There's something... buried beneath all that Holderkin conditioning. A potential that calls to me despite his abhorrent views on women.:*\n" +
        '\n' +
        "*:Be careful, Sister. You've gone without Choosing for longer than most. Don't let desperation cloud your judgment.:*\n" +
        '\n' +
        "The barb stung, as Hydatha surely knew it would. Among the Companions, Senta's prolonged unpartnered status had become something of a quiet joke—the overly selective filly who found fault with every potential Chosen. Too brash, too timid, too rigid, too unpredictable. Always some reason to turn away.\n" +
        '\n' +
        "By midafternoon, the Holderkin boy had wandered into Exile's Gate, a neighborhood no country youth should enter unprepared. The narrow streets here housed those who lived on society's margins—foreign merchants unable to afford better quarters, laborers between jobs, and those with services to sell that wouldn't be advertised in better districts.\n" +
        '\n' +
        'A trio of hard-eyed men lounging against a crumbling wall straightened as they spotted the obvious outsider. Their predatory posture told a clear story to anyone with city experience.\n' +
        '\n' +
        `"Hey there, country boy!" The tallest of the three called out. "Looking for something special in these parts? We can help you find whatever you need..." His smile didn't reach his eyes.\n` +
        '\n' +
        'The other two spread out slightly, one casually blocking the alley mouth behind the Holderkin youth.\n' +
        '\n' +
        "Senta's ears flattened against her head. These weren't simply opportunistic thieves—they were the sort who ensured their victims wouldn't report to the Guard afterward. Her hooves shifted restlessly on the cobblestones as she debated intervention.\n" +
        '\n' +
        '*Is this worth revealing myself? For this boy with his distasteful ambitions?*\n' +
        '\n' +
        '[USER: Adam]\n' +
        'his hand drifts to his dagger\n' +
        `"Aye. For a compulsory finder's fee, right?"\n` +
        '\n' +
        '[CHARACTER: Senta]\n' +
        '"Smart country boy," the tallest thug chuckled, his hand casually resting on something hidden beneath his worn jerkin. "Ten silver pieces ensures safe passage through our neighborhood. Consider it... local hospitality."\n' +
        '\n' +
        `The second man spat onto the cobblestones. "Unless you'd prefer our *special* welcome."\n` +
        '\n' +
        "The third circled wider, positioning himself to cut off retreat. The alleyway suddenly felt narrower, darker, despite the afternoon sun still hanging above the crowded rooftops of Exile's Gate.\n" +
        '\n' +
        'Senta pawed at the ground, her sapphire eyes narrowing as she assessed the situation. The Holderkin boy was clearly outmatched—three grown men, almost certainly armed, against a sixteen-year-old with nothing but a dagger and misplaced confidence.\n' +
        '\n' +
        '*:This is going to end badly,:* she projected, not expecting any Companion to be near enough to hear.\n' +
        '\n' +
        "To her surprise, a response came immediately. *:Then why not intervene, Choosy One?:* It was Kantor, Alberich's Companion, his mental voice tinged with wry humor.\n" +
        '\n' +
        "*:Because I'm not sure he's worth saving.:*\n" +
        '\n' +
        '*:Yet here you are, following him.:*\n' +
        '\n' +
        `The tallest thug took a step forward, hand now clearly gripping the hilt of a concealed blade. "Time's running short, boy. Silver or blood—your choice."\n` +
        '\n' +
        'In that moment, the Holderkin youth shifted his stance—a subtle movement that Senta recognized instantly as the foundation of proper knife-fighting technique. Not the clumsy posturing of a farm boy, but something taught by someone who knew combat. Interesting.\n' +
        '\n' +
        '*:Fine,:* Senta projected to Kantor with exasperation. *:Watch and be entertained.:*\n' +
        '\n' +
        'With a sudden, explosive burst of energy, she rounded the corner into the alley, her pristine white coat catching the fading sunlight like a beacon of divine intervention. Her hooves struck the cobblestones with deliberate force, the sound echoing between the close-set buildings like thunder.\n' +
        '\n' +
        "The effect was instantaneous. The thugs froze, eyes widening as they took in the unmistakable form of a Companion. Even the most hardened criminals in Haven knew better than to conduct their business in the presence of one of Valdemar's mystical guardians.\n" +
        '\n' +
        '"Companion," the tall one whispered, slowly withdrawing his hand from his weapon.\n' +
        '\n' +
        `"Where there's a Companion, there's a Herald," the second muttered, already backing away. "Not worth it."\n` +
        '\n' +
        "The third thug, already closer to the alley's entrance, simply turned and fled without a word.\n" +
        '\n' +
        'Senta snorted, tossing her mane dramatically as she continued walking forward with measured steps. Her ears remained perked forward, her eyes locked on the remaining thugs with an intelligence no ordinary horse could possess.\n' +
        '\n' +
        '*Sometimes,* she thought to herself, *just showing up is enough.*'
    }
  ],
  prompt: undefined,
  model: 'claude-3-7-sonnet-20250219',
  temperature: 0.95,
  max_tokens: 16000,
  max_completion_tokens: undefined,
  stream: false,
  presence_penalty: 0,
  frequency_penalty: 0,
  top_p: 1,
  top_k: undefined,
  stop: undefined,
  logit_bias: undefined,
  seed: undefined,
  n: undefined,
  logprobs: undefined,
  top_logprobs: undefined
}
Chat Completion response: {
  choices: [
    {
      finish_reason: 'stop',
      index: 0,
      message: {
        content: '```json\n' +
          '{\n' +
          `  "summary": "Adam, a 16-year-old Holderkin male, arrived in Haven after his father's death led to Elders claiming his homestead. He sought legal means to contest this, wanting to secure "young virgin wives" according to Holderkin beliefs. A white Companion named Senta secretly followed him, communicating telepathically with other Companions about her unusual interest in him despite his troubling attitudes toward women. Adam got lost in Haven and wandered into dangerous Exile's Gate neighborhood. Three thugs attempted to rob him, demanding ten silver pieces for "safe passage." As Adam prepared to defend himself with surprising combat skill, Senta intervened by dramatically revealing herself. The thugs immediately retreated, recognizing a Companion meant potential Herald presence nearby.",\n` +
          '  "lorebooks": [\n' +
          '    {\n' +
          '      "name": "Adam",\n' +
          '      "type": "character",\n' +
          '      "keywords": ["adam", "holderkin"],\n' +
          '      "content": "[Adam: Holderkin youth, age(16), status(orphaned), background(father recently died), goals(contest homestead claim, acquire wives), skills(knife-fighting technique), possessions(dagger), beliefs(follows Holderkin traditions regarding women)]"\n' +
          '    },\n' +
          '    {\n' +
          '      "name": "Senta",\n' +
          '      "type": "character",\n' +
          '      "keywords": ["senta", "companion"],\n' +
          '      "content": "[Senta: Companion, appearance(white horse, sapphire-blue eyes), status(unpartnered, virgin filly), abilities(mindspeak, silent movement), personality(selective, conflicted), reputation(overly picky about Choosing), drawn to(Adam despite misgivings)]"\n' +
          '    },\n' +
          '    {\n' +
          '      "name": "Holderkin",\n' +
          '      "type": "faction",\n' +
          '      "keywords": ["holderkin", "elders"],\n' +
          '      "content": "[Holderkin: traditional group, beliefs(patriarchal, values virgin wives), practices(Elders can claim orphaned homesteads), location(outside Haven)]"\n' +
          '    },\n' +
          '    {\n' +
          '      "name": "Haven",\n' +
          '      "type": "location",\n' +
          '      "keywords": ["haven"],\n' +
          `      "content": "[Haven: city, features(eastern gate, labyrinthine streets, diverse neighborhoods), areas(Exile's Gate, Tailor's Row), establishments(The Gilded Acorn, Companion's Bell)]"\n` +
          '    },\n' +
          '    {\n' +
          '      "name": "Companions",\n' +
          '      "type": "faction",\n' +
          '      "keywords": ["companions", "companion"],\n' +
          '      "content": "[Companions: mystical guardians, appearance(white horses, blue eyes), abilities(mindspeak with each other), members(Senta, Rolan, Hydatha, Kantor), significance(associated with Heralds), mechanics(Choose human partners)]"\n' +
          '    },\n' +
          '    {\n' +
          `      "name": "Exile's Gate",\n` +
          '      "type": "location",\n' +
          '      "keywords": ["exile"],\n' +
          '      "secondaryKeys": ["gate"],\n' +
          `      "content": "[Exile's Gate: dangerous neighborhood, inhabitants(criminals, foreign merchants, laborers), atmosphere(threatening), location(within Haven)]"\n` +
          '    }\n' +
          '  ]\n' +
          '}\n' +
          '```',
        role: 'assistant'
      }
    }
  ],
  created: 1762035661,
  id: 'chatcmpl-MUIYWBSxrD11zvarmDAkRUeL5Zua',
  model: 'claude-3-7-sonnet-20250219',
  object: 'chat.completion',
  system_fingerprint: 'fp_nigga',
  usage: { completion_tokens: 841, prompt_tokens: 6001, total_tokens: 6842 }
}
Chat Completion request: {
  messages: [
    { role: 'system', content: 'Complete the requested task.' },
    {
      role: 'user',
      content: '// OOC REQUEST: Pause the roleplay and step out of character for this reply.\n' +
        '// Combine multiple scene summaries into a single cohesive roleplay memory.\n' +
        '// This is a NARRATIVE summary (NOT JSON), following best practices for long-term memory.\n' +
        '//\n' +
        '// ⚠️ CRITICAL: ONLY USE TEXT BELOW - NO OUTSIDE KNOWLEDGE ⚠️\n' +
        '//\n' +
        '// - ONLY extract information from the scene summaries provided below\n' +
        '// - DO NOT use ANY information from your training data\n' +
        '// - If a name matches a franchise character, IGNORE franchise details completely\n' +
        '// - If something is not mentioned in the summaries below, it DOES NOT EXIST\n' +
        '// - Incomplete information is CORRECT - do not fill gaps\n' +
        '// - When in doubt, OMIT the detail entirely\n' +
        '//\n' +
        '// CRITICAL GUIDELINES:\n' +
        '//\n' +
        '// 1. HANDLE SCENE CHANGES NATURALLY\n' +
        '//    - Roleplays can have completely different scenes, locations, characters\n' +
        '//    - Scene changes are NORMAL and EXPECTED (travel, time skips, new encounters)\n' +
        '//    - DO NOT refuse to merge or ask questions about disconnected scenes\n' +
        '//    - Simply add new information and update the running summary\n' +
        '//    - If scenes are unrelated, organize them separately by topic/location\n' +
        '//\n' +
        '// 2. COMPLETENESS AND CLARITY REQUIRED\n' +
        '//    - Capture ALL essential events and state changes from scenes\n' +
        '//    - Remove redundancy but preserve unique happenings\n' +
        '//    - This summary replaces hidden chat history for timeline continuity\n' +
        '//    - Include all important events, decisions, and current states\n' +
        '//    - Lorebook entries provide entity details - summary provides event timeline\n' +
        '//\n' +
        '// 3. INCLUDE FACTUAL DETAILS, EXCLUDE EMOTIONAL ANALYSIS\n' +
        '//    - INCLUDE: All concrete facts - what was said, read, done, seen, specific items/names/places\n' +
        '//    - INCLUDE: Factual descriptions of objects/actions - specific book titles, item names, etc.\n' +
        '//    - EXCLUDE: Emotional states and interpretations - "felt jealous", "seemed worried", "was embarrassed"\n' +
        '//    - EXCLUDE: Emotional modifiers on actions - "angrily left", "nervously asked", "excitedly ran"\n' +
        '//    - EXCLUDE: Character personality analysis, motivations, relationship dynamics (those go in lorebook)\n' +
        '//    - Be specific and concrete with factual details, not vague summaries\n' +
        '//    - Capture what happened with full factual detail, omit emotional interpretation\n' +
        '//\n' +
        '// 4. FOCUS ON STATE, NOT EVENT SEQUENCES\n' +
        '//    - Capture CURRENT state: who, what, where, status\n' +
        "//    - Don't narrate step-by-step sequences\n" +
        '//    - Outcomes and results matter, not how we got there\n' +
        '//\n' +
        '// 5. MERGE AND DEDUPLICATE\n' +
        '//    - Combine overlapping information from multiple scenes\n' +
        '//    - Keep most recent state when conflicts exist\n' +
        "//    - Remove information that's no longer relevant\n" +
        '//    - Preserve unique important details\n' +
        '//    - If no overlap, simply add new scenes to appropriate sections\n' +
        '//\n' +
        '// 6. ORGANIZE BY TOPIC\n' +
        '//    - Group information logically (characters, locations, situation, etc.)\n' +
        '//    - Use markdown headers (##) to separate sections\n' +
        '//    - Keep related information together\n' +
        '//    - Different scenes/locations get separate entries under same headers\n' +
        '//\n' +
        '// 7. AVOID PROMPT POISONING\n' +
        '//    - Neutral, informational tone\n' +
        '//    - Avoid repetitive phrasing\n' +
        "//    - Don't echo stylistic quirks from scenes\n" +
        '//    - Varied sentence structure\n' +
        '//\n' +
        '// OUTPUT FORMAT:\n' +
        '// - Brief statements with markdown headers\n' +
        '// - NOT JSON format\n' +
        '// - Organized by topic/category\n' +
        '// - Focus on events/state, not entity descriptions\n' +
        '// - Complete timeline coverage, concise entity mentions\n' +
        '//\n' +
        '// EXAMPLE OUTPUT STRUCTURE:\n' +
        '//\n' +
        '// ## Current Situation\n' +
        "// Brief factual overview with specific details. What's happening now. Where people are. Unresolved situations.\n" +
        '// - Include concrete facts: locations, specific actions, pending decisions, items mentioned\n' +
        '// - Exclude emotional analysis: NOT "feels jealous", "anxiously waiting", "worried about"\n' +
        '//\n' +
        '// ## Characters\n' +
        '// **Character Name**: Current location. Recent actions with specific details. Current status.\n' +
        '// - Include concrete factual details: what they read/said/did, specific items they used\n' +
        '// - Exclude emotions and interpretations: NOT "felt jealous", "seemed upset", "was embarrassed"\n' +
        "// - Exclude personality analysis, motivations, relationship dynamics (that's in lorebook)\n" +
        "// - Focus on: Where are they? What specifically did they do? What's their current state?\n" +
        '//\n' +
        '// ## Locations\n' +
        "// **Location Name**: Current state. Recent events there. Who's present.\n" +
        '//\n' +
        '// ## Key Items & Objects\n' +
        '// **Item Name**: Current location/owner. Recent use or significance. Current status.\n' +
        '//\n' +
        '// ## Active Goals & Plans\n' +
        "// - Goal: Who's involved, current status, what happened recently\n" +
        '// - Unresolved situation: Current state, pending decisions\n' +
        '//\n' +
        '// ## Secrets & Hidden Information\n' +
        "// - Secret fact with specific details: Who knows, who doesn't know, what specifically is hidden\n" +
        `// - State observable facts: "X didn't reveal Y to Z", "X closed browser when Y approached"\n` +
        '// - Exclude interpretations of why: NOT "because embarrassed", "due to shame"\n' +
        '//\n' +
        '// EXAMPLE - Handling Unrelated Scenes:\n' +
        '// If Scene 1 is about "exploring ancient ruins" and Scene 2 is about "meeting at tavern":\n' +
        '// ✅ DO: List both under ## Characters section separately\n' +
        '// ✅ DO: List both locations under ## Locations section\n' +
        '// ✅ DO: Merge naturally without questioning the disconnect\n' +
        "// ❌ DON'T: Refuse to merge or ask questions about why scenes are different\n" +
        "// ❌ DON'T: Try to force connections that don't exist\n" +
        '//\n' +
        '\n' +
        '// NEW SCENE SUMMARIES TO MERGE:\n' +
        '[Lost in Demon Horse Territory]\n' +
        '```json\n' +
        '{\n' +
        `  "summary": "Adam, a 16-year-old Holderkin male, arrived in Haven after his father's death led to Elders claiming his homestead. He sought legal means to contest this, wanting to secure "young virgin wives" according to Holderkin beliefs. A white Companion named Senta secretly followed him, communicating telepathically with other Companions about her unusual interest in him despite his troubling attitudes toward women. Adam got lost in Haven and wandered into dangerous Exile's Gate neighborhood. Three thugs attempted to rob him, demanding ten silver pieces for "safe passage." As Adam prepared to defend himself with surprising combat skill, Senta intervened by dramatically revealing herself. The thugs immediately retreated, recognizing a Companion meant potential Herald presence nearby.",\n` +
        '  "lorebooks": [\n' +
        '    {\n' +
        '      "name": "Adam",\n' +
        '      "type": "character",\n' +
        '      "keywords": ["adam", "holderkin"],\n' +
        '      "content": "[Adam: Holderkin youth, age(16), status(orphaned), background(father recently died), goals(contest homestead claim, acquire wives), skills(knife-fighting technique), possessions(dagger), beliefs(follows Holderkin traditions regarding women)]"\n' +
        '    },\n' +
        '    {\n' +
        '      "name": "Senta",\n' +
        '      "type": "character",\n' +
        '      "keywords": ["senta", "companion"],\n' +
        '      "content": "[Senta: Companion, appearance(white horse, sapphire-blue eyes), status(unpartnered, virgin filly), abilities(mindspeak, silent movement), personality(selective, conflicted), reputation(overly picky about Choosing), drawn to(Adam despite misgivings)]"\n' +
        '    },\n' +
        '    {\n' +
        '      "name": "Holderkin",\n' +
        '      "type": "faction",\n' +
        '      "keywords": ["holderkin", "elders"],\n' +
        '      "content": "[Holderkin: traditional group, beliefs(patriarchal, values virgin wives), practices(Elders can claim orphaned homesteads), location(outside Haven)]"\n' +
        '    },\n' +
        '    {\n' +
        '      "name": "Haven",\n' +
        '      "type": "location",\n' +
        '      "keywords": ["haven"],\n' +
        `      "content": "[Haven: city, features(eastern gate, labyrinthine streets, diverse neighborhoods), areas(Exile's Gate, Tailor's Row), establishments(The Gilded Acorn, Companion's Bell)]"\n` +
        '    },\n' +
        '    {\n' +
        '      "name": "Companions",\n' +
        '      "type": "faction",\n' +
        '      "keywords": ["companions", "companion"],\n' +
        '      "content": "[Companions: mystical guardians, appearance(white horses, blue eyes), abilities(mindspeak with each other), members(Senta, Rolan, Hydatha, Kantor), significance(associated with Heralds), mechanics(Choose human partners)]"\n' +
        '    },\n' +
        '    {\n' +
        `      "name": "Exile's Gate",\n` +
        '      "type": "location",\n' +
        '      "keywords": ["exile"],\n' +
        '      "secondaryKeys": ["gate"],\n' +
        `      "content": "[Exile's Gate: dangerous neighborhood, inhabitants(criminals, foreign merchants, laborers), atmosphere(threatening), location(within Haven)]"\n` +
        '    }\n' +
        '  ]\n' +
        '}\n' +
        '```'
    }
  ],
  prompt: undefined,
  model: 'claude-3-7-sonnet-20250219',
  temperature: 0.95,
  max_tokens: 16000,
  max_completion_tokens: undefined,
  stream: false,
  presence_penalty: 0,
  frequency_penalty: 0,
  top_p: 1,
  top_k: undefined,
  stop: undefined,
  logit_bias: undefined,
  seed: undefined,
  n: undefined,
  logprobs: undefined,
  top_logprobs: undefined
}
Chat Completion response: {
  choices: [
    {
      finish_reason: 'stop',
      index: 0,
      message: {
        content: '## OOC Response: Memory Compilation\n' +
          '\n' +
          "I've combined your scene summary into a cohesive roleplay memory that captures all the key information while following the guidelines you provided.\n" +
          '\n' +
          '## Current Situation\n' +
          '\n' +
          `Adam, a 16-year-old Holderkin youth, has arrived in Haven after his father's death. He became lost in the city and wandered into the dangerous Exile's Gate neighborhood. Three thugs attempted to rob him, demanding ten silver pieces for "safe passage." As Adam prepared to defend himself, a white Companion named Senta dramatically revealed herself, causing the thugs to retreat immediately due to the implied presence of a Herald nearby.\n` +
          '\n' +
          '## Characters\n' +
          '\n' +
          `**Adam**: Currently in Exile's Gate neighborhood in Haven. Arrived in the city seeking legal means to contest Holderkin Elders' claim on his homestead after his father's death. Demonstrated combat skills when confronted by thugs. Wants to secure his homestead and acquire "young virgin wives" according to Holderkin traditions.\n` +
          '\n' +
          '**Senta**: White Companion with sapphire-blue eyes who has been secretly following Adam. Used telepathic communication with other Companions about her unusual interest in Adam despite his troubling attitudes toward women. Recently revealed herself to intervene when Adam was threatened by thugs.\n' +
          '\n' +
          '## Locations\n' +
          '\n' +
          "**Haven**: City where Adam recently arrived. Features eastern gate, labyrinthine streets, and diverse neighborhoods including the dangerous Exile's Gate where Adam and Senta currently are.\n" +
          '\n' +
          "**Exile's Gate**: Dangerous neighborhood within Haven where Adam wandered while lost. Three thugs attempted to rob him here before Senta intervened.\n" +
          '\n' +
          '## Active Goals & Plans\n' +
          '\n' +
          "- **Adam's Legal Contest**: Adam intends to find legal means to contest the Holderkin Elders' claim on his homestead following his father's death.\n" +
          "- **Senta's Interest**: Senta is drawn to Adam despite misgivings about his attitudes and has been following him secretly.\n" +
          '\n' +
          '## Secrets & Hidden Information\n' +
          '\n' +
          '- Senta has been secretly following Adam without his knowledge until her dramatic intervention.\n' +
          '- Senta has communicated telepathically with other Companions about her unusual interest in Adam.\n' +
          '- The thugs retreated because they recognized a Companion indicates potential Herald presence nearby.',
        role: 'assistant'
      }
    }
  ],
  created: 1762035683,
  id: 'chatcmpl-JcsQvWxvmwrLzfRZoaT4jWwp7vju',
  model: 'claude-3-7-sonnet-20250219',
  object: 'chat.completion',
  system_fingerprint: 'fp_nigga',
  usage: { completion_tokens: 687, prompt_tokens: 2511, total_tokens: 3198 }
}